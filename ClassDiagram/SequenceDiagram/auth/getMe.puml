@startuml Get Me (GET)

header Massage Reservation Sequence Diagram: Get Me
footer CEDT Chulalongkorn University
title "Get Me (GET)"

participant "User" as user
participant "<<javaScript>>\n:server" as server
participant "<<router>>\n:auth" as routerAuths
participant "<<middleware>>\n:auth" as middleware
participant "<<controllers>>\n:auth" as controllersAuths
participant "<<model>>\n:User" as modelUser
database "<<MongoDB>>\n:user" as AuthsDatabase

user->server ++:req.post('/api/v1/auth/me')
server->routerAuths ++:app.use('/api/v1/auth',auth)
routerAuths -> middleware ++:verifyToken()
middleware --> routerAuths --:req.user()
routerAuths -> controllersAuths ++:getMe()
controllersAuths->modelUser ++:findById(req.user.id)
modelUser ->AuthsDatabase ++: UserSchema
AuthsDatabase --> modelUser --: user
controllersAuths <-- modelUser --:user
controllersAuths->user --:response, token

@enduml
